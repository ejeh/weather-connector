{"version":3,"sources":["../../../src/api/weather/controller.js"],"names":["search","req","res","apiKey","process","env","APIKEY","query","q","url","err","response","result","message","weather","JSON","parse"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;AACO,SAASA,MAAT,CAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AAC/B,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,MAA3B;;AAD+B,aAEjBL,GAAG,CAACM,KAAJ,IAAa,EAFI;AAAA,MAEvBC,CAFuB,QAEvBA,CAFuB;;AAG/B,MAAMC,GAAG,8DAAuDD,CAAvD,iCAA+EL,MAA/E,CAAT;AAEA,2BAAQM,GAAR,EAAa,UAACC,GAAD,EAAMC,QAAN,EAAgBC,MAAhB,EAA2B;AACtC,QAAIF,GAAJ,EAAS;AACP,UAAI,CAACE,MAAL,EAAa,OAAO,yBAASV,GAAT,EAAc,yBAAd,CAAP;AACb,aAAO,qBAAKA,GAAL,EAAU,GAAV,wCAA8CQ,GAAG,CAACG,OAAlD,EAAP;AACD,KAHD,MAGO;AACL,UAAIC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWJ,MAAX,CAAd;AACA,aAAO,wBAAQV,GAAR,EAAa,GAAb,EAAkBY,OAAlB,EAA2B,oCAA3B,CAAP;AACD;AACF,GARD;AASD","sourcesContent":["import request from \"request\";\nimport { success, fail, notFound } from \"../../services/responses\";\n\n// Retrieve a single record\nexport function search(req, res) {\n  const apiKey = process.env.APIKEY;\n  const { q } = req.query || {};\n  const url = `http://api.openweathermap.org/data/2.5/weather?q=${q}&units=metric&appid=${apiKey}`;\n\n  request(url, (err, response, result) => {\n    if (err) {\n      if (!result) return notFound(res, \"Error record not found.\");\n      return fail(res, 500, `Error retrieving record.\\r\\n${err.message}`);\n    } else {\n      let weather = JSON.parse(result);\n      return success(res, 200, weather, \"retrieving record was successfull!\");\n    }\n  });\n}\n"],"file":"controller.js"}